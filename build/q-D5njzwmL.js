const I=(e,t,n)=>Math.min(Math.max(n,e),t),m=e=>typeof e=="number",M=e=>Array.isArray(e)&&!m(e[0]),R=(e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e};function _(e,t){return M(e)?e[R(0,e.length,t)]:e}const W=(e,t,n)=>-n*e+n*t+e,fe=()=>{},A=e=>e,O=(e,t,n)=>t-e===0?1:(n-e)/(t-e);function P(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=O(0,t,r);e.push(W(n,1,s))}}function T(e){const t=[0];return P(t,e-1),t}function F(e,t=T(e.length),n=A){const r=e.length,s=r-t.length;return s>0&&P(t,s),i=>{let o=0;for(;o<r-2&&!(i<t[o+1]);o++);let f=I(0,1,O(t[o],t[o+1],i));return f=_(n,o)(f),W(e[o],e[o+1],f)}}const k=e=>typeof e=="function",B=e=>typeof e=="string";function j(e,t){return t?e*(1e3/t):0}function N(e,t){var n;return typeof e=="string"?t?((n=t[e])!==null&&n!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}function q(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}const v=new WeakMap;let d;function D(e,t){if(t){const{inlineSize:n,blockSize:r}=t[0];return{width:n,height:r}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function G({target:e,contentRect:t,borderBoxSize:n}){var r;(r=v.get(e))===null||r===void 0||r.forEach(s=>{s({target:e,contentSize:t,get size(){return D(e,n)}})})}function V(e){e.forEach(G)}function $(){typeof ResizeObserver>"u"||(d=new ResizeObserver(V))}function J(e,t){d||$();const n=N(e);return n.forEach(r=>{let s=v.get(r);s||(s=new Set,v.set(r,s)),s.add(t),d==null||d.observe(r)}),()=>{n.forEach(r=>{const s=v.get(r);s==null||s.delete(t),s!=null&&s.size||d==null||d.unobserve(r)})}}const y=new Set;let p;function K(){p=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};y.forEach(n=>n(t))},window.addEventListener("resize",p)}function Q(e){return y.add(e),p||K(),()=>{y.delete(e),!y.size&&p&&(p=void 0)}}function U(e,t){return k(e)?Q(e):J(e,t)}const X=50,z=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),Y=()=>({time:0,x:z(),y:z()}),Z={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function L(e,t,n,r){const s=n[t],{length:i,position:o}=Z[t],f=s.current,h=n.time;s.current=e["scroll"+o],s.scrollLength=e["scroll"+i]-e["client"+i],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=O(0,s.scrollLength,s.current);const c=r-h;s.velocity=c>X?0:j(s.current-f,c)}function C(e,t,n){L(e,"x",t,n),L(e,"y",t,n),t.time=n}function ee(e,t){let n={x:0,y:0},r=e;for(;r&&r!==t;)if(r instanceof HTMLElement)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if(r instanceof SVGGraphicsElement&&"getBBox"in r){const{top:s,left:i}=r.getBBox();for(n.x+=i,n.y+=s;r&&r.tagName!=="svg";)r=r.parentNode}return n}const te={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},E={start:0,center:.5,end:1};function S(e,t,n=0){let r=0;if(E[e]!==void 0&&(e=E[e]),B(e)){const s=parseFloat(e);e.endsWith("px")?r=s:e.endsWith("%")?e=s/100:e.endsWith("vw")?r=s/100*document.documentElement.clientWidth:e.endsWith("vh")?r=s/100*document.documentElement.clientHeight:e=s}return m(e)&&(r=t*e),n+r}const ne=[0,0];function re(e,t,n,r){let s=Array.isArray(e)?e:ne,i=0,o=0;return m(e)?s=[e,e]:B(e)&&(e=e.trim(),e.includes(" ")?s=e.split(" "):s=[e,E[e]?e:"0"]),i=S(s[0],n,r),o=S(s[1],t),i-o}const se={x:0,y:0};function ie(e,t,n){let{offset:r=te.All}=n;const{target:s=e,axis:i="y"}=n,o=i==="y"?"height":"width",f=s!==e?ee(s,e):se,h=s===e?{width:e.scrollWidth,height:e.scrollHeight}:{width:s.clientWidth,height:s.clientHeight},c={width:e.clientWidth,height:e.clientHeight};t[i].offset.length=0;let a=!t[i].interpolate;const u=r.length;for(let l=0;l<u;l++){const x=re(r[l],c[o],h[o],f[i]);!a&&x!==t[i].interpolatorOffsets[l]&&(a=!0),t[i].offset[l]=x}a&&(t[i].interpolate=F(T(u),t[i].offset),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=t[i].interpolate(t[i].current)}function oe(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let r=t;for(;r&&r!=e;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function ce(e,t,n,r={}){const s=r.axis||"y";return{measure:()=>oe(e,r.target,n),update:i=>{C(e,n,i),(r.offset||r.target)&&ie(e,n,r)},notify:k(t)?()=>t(n):le(t,n[s])}}function le(e,t){return e.pause(),e.forEachNative((n,{easing:r})=>{var s,i;if(n.updateDuration)r||(n.easing=A),n.updateDuration(1);else{const o={duration:1e3};r||(o.easing="linear"),(i=(s=n.effect)===null||s===void 0?void 0:s.updateTiming)===null||i===void 0||i.call(s,o)}}),()=>{e.currentTime=t.progress}}const g=new WeakMap,b=new WeakMap,w=new WeakMap,H=e=>e===document.documentElement?window:e;function ae(e,t={}){var{container:n=document.documentElement}=t,r=q(t,["container"]);let s=w.get(n);s||(s=new Set,w.set(n,s));const i=Y(),o=ce(n,e,i,r);if(s.add(o),!g.has(n)){const c=()=>{const u=performance.now();for(const l of s)l.measure();for(const l of s)l.update(u);for(const l of s)l.notify()};g.set(n,c);const a=H(n);window.addEventListener("resize",c,{passive:!0}),n!==document.documentElement&&b.set(n,U(n,c)),a.addEventListener("scroll",c,{passive:!0})}const f=g.get(n),h=requestAnimationFrame(f);return()=>{var c;typeof e!="function"&&e.stop(),cancelAnimationFrame(h);const a=w.get(n);if(!a||(a.delete(o),a.size))return;const u=g.get(n);g.delete(n),u&&(H(n).removeEventListener("scroll",u),(c=b.get(n))===null||c===void 0||c(),window.removeEventListener("resize",u))}}export{k as a,M as b,I as c,F as d,B as e,fe as f,m as i,A as n,O as p,N as r,ae as s};
